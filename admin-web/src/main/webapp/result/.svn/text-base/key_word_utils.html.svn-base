<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<style>
         *{margin: 0;padding: 0}
        ul,li{list-style-type: none;margin: 0;padding:0}
        body{font-family: "Microsoft YaHei", arial;font-size: 14px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none}
        .model{width: 100%; height: 100%; background-color: #000; opacity: 0.5; filter: alpha(opacity=50);z-index:99999998;position:absolute;left:0px; top:0px;display:none}
        .keywordsBox{width: 600px;height: 400px;position: fixed;left: 50%;top: 50%;margin: -200px -300px;z-index:99999999;border-radius: 10px;background: #fff;display:none}
        .keywordsBox .title{border-bottom: solid 1px #B9B9B9;height: 40px;line-height: 40px;text-indent: 20px;color: #333;font-size: 16px}
        .keywordsBox .contents{overflow: hidden}
        .keywordsBox .contents .left{float: left;width: 140px;height: 200px;border:solid 1px #ececec;border-top: none;border-left: none}
        .keywordsBox .contents .left .tit{background: #BDB7B7;height: 30px;line-height: 30px;text-align: center}
        .keywordsBox .contents .right .tit{background: #BDB7B7;height: 30px;line-height: 30px;text-align: center}
        .keywordsBox .contents .left .list{overflow-y:scroll;height:171px}
        .keywordsBox .contents .left .list ul{margin: 10px 0 0 0}
        .keywordsBox .contents .left .list ul li{width: 100%;text-indent: 20px;height: 25px;line-height: 25px;cursor: pointer;margin-top: 5px}

        .keywordsBox .contents .left .list ul li:hover,.keywordsBox .content .left .list ul li.curr{background: #ececec}
        .keywordsBox .contents .right{float: left;width: 459px;border-bottom:solid 1px #ececec;height: 200px}
        .keywordsBox .contents .right .list{margin-left:20px;overflow-y: scroll;height: 270px;display: none}
        .keywordsBox .contents .right .curr{display: block}
        .keywordsBox .contents .right .list ul li{text-indent: 16px;margin-top: 20px;cursor: pointer;width: 100px;overflow: hidden;float: left;background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAyCAMAAABbLho1AAAAllBMVEX////g4ODc3Nze3t7u7u7q6ur6+vqmpqb8/Pzs7Ozi4uL4+PioqKixsbGvr6+jo6PZ2dnm5ubX19fo6OjHx8dISEjz8/Py8vLU1NTLy8u+vr65ubmrq6ugoKBoaGhBQUHPz8+pqamdnZ06Ojr19fXR0dHCwsJ9fX16enpRUVG1tbWampqMjIyBgYFycnJgYGBWVlYuLi4zDuM8AAAA70lEQVQoz+3SSXLCMBAF0K/BsmwBlmQbzxNmzJz7Xy4mNEVllwPwVv2rf/WqAWxBCiyick3KAFBVFpGq0tA1kySuAd2mMUknBewEI+JVAx3jhHUAEsHvlmge5bhT2E9OELfaQ714Tsq1gWkaRupaAf4YkqMHYII7twU0nv5LQ/8dtSJLoN94DNJviJeAsY0kjTVAmwZFIKOqz4INgMkxLqzt5y+RAAhZLJ37+M7f7E4BCT+cD+f5cuLL9hr74ZLnn75k4W88zcOQZ6O8bYV9z4dQRJbfTgnRrzx39louxlaQdixgWLYiGTOASQOSGvwAde4RPRBexjAAAAAASUVORK5CYII=") no-repeat left top;background-size:14px 50px;height: 14px;line-height: 14px }
        .keywordsBox .contents .right .list ul li.curr{background-position:left bottom }
        .keywordsBox .selected{height: 90px;border: solid 1px #ececec;width: 590px;margin: 0 auto;border-radius: 5px;}
        .p_selected{text-indent: 10px}
        #selected span{display: inline-block;margin: 5px 10px;background: #F9B1B1;border-radius: 5px;padding: 5px}
        .keywordsBox .btns{text-align: center;margin-top: 10px}
        .keywordsBox .btns span{display: inline-block;width: 60px;height: 30px;line-height: 30px;border-radius: 10px;text-align: center;background: green;color: #fff;cursor: pointer;margin-left: 50px}
   #keywordslist span{display:inline-block;padding:0 5px;margin:0 5px;background:#ddd;}
   
   #add{background: rgb(6, 177, 32) none repeat scroll 0% 0%;width: 65px;height: 30px;text-align: center;color: rgb(255, 255, 255);margin: 0px 0px 0px 10px;border-radius: 8px;cursor: pointer;}
    </style>
    <div class="model"></div>
    <div class="keywordsBox">
        <div class="title">添加关键字</div>
        <div class="contents">
            
           
          <div class="left">
              <div class="tit">关键字类型</div>
              <div class="list">
                  <ul>
                 #foreach($item in $keyWordType)
				<li class="curr" value="$!item.id">$!item.name</li>
				#end
                  </ul>
              </div>
          </div>
            
            
            
            
            <div class="right">
                <div class="tit">关键字</div>
                <div class="list curr">
                    <ul>
                        
                    </ul>
                </div>
                <div class="list">
                    <ul>
                    </ul>
                </div>
                <div class="list">
                    <ul>
                    </ul>
                </div>
                <div class="list">
                    <ul>
                    </ul>
                </div>
            </div>
        </div>
        <p class="p_selected">已选择关键字:</p>
        <div class="selected" id="selected"></div>
        <div class="btns">
            <span id="keywordsComfirm">确定</span>
            <span id="keywordsCancel">取消</span>
        </div>
    </div>
    <script>
    $(document).ready(function(){
    	$(".model").height($(document).height());
    	
    });
    
    $(".right .list").delegate("ul li","click",function(){
        if($(this).hasClass("curr")){
            $(this).removeClass("curr");
            var temp=$("#selected").html(),
                    keyword=$(this).html(),
                    kid=$(this).attr("kid");
            $("#selected").html(temp.replace("<span kid="+"\""+kid+"\""+">"+keyword+"</span>",""));
        }else{
            $(this).addClass("curr");
            var temp=$("#selected").html(),
                    keyword=$(this).html(),
                    kid=$(this).attr("kid");
            $("#selected").html(temp+"<span kid="+kid+">"+keyword+"</span>");
        }
    });
    
    $("#keywordsCancel").click(function(){
        $(".model").hide();
        $(".keywordsBox").hide();
    });

    $("#keywordsComfirm").click(function(){
        $(".model").hide();
        $(".keywordsBox").hide();
        var re=/<span kid="([^<]+)">([^<]+)<\/span>/g;
        var keywordsStr=$("#selected").html();
        var kidArr=[];
        while(re.exec(keywordsStr)!=null)
        {
        	kidArr.push(RegExp.$1);
        }
        $("#kid_typeid").val(kidArr.join(","));
        $("#keywordslist").html(keywordsStr);
    });
    
    function showKeywordsBox(){
    	$(".model").show();
        $(".keywordsBox").show();
    }
    
    $(".left .list ul li").click(function(){
        $(this).addClass("curr").siblings("li").removeClass("curr");
        var index=$(".left .list ul li").index(this);
        $(".right .list").eq(index).show().siblings(".list").hide();
        var that=this;
        var id=$(this).attr("value");
        
        if($(this).attr("load")=="loaded"){
            return;
        }else{
           
        	$.ajax({
                type: 'POST',
                url: '$!webPath/admin/physicalKeyWord/getKeyWordByVo.htm',
                async: false,
                data: {type:id},
                dataType: 'json',
                success: function (data) {                    
                    var strHtml=""
                   	for(var i=0;i<data.length;i++){
                   		strHtml+="<li kid='"+data[i].id+"'>"+data[i].name+"</li>";                       	
                       }
                    $(".right .list").eq(index).html("<ul>"+strHtml+"</ul>");
                    $(that).attr("load","loaded");
                },
                error: function () {
                    
                }
            });   
        }
    });

    
    </script>
    
   </html>
