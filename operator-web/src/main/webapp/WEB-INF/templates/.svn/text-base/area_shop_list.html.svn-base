<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link type="text/css" rel="stylesheet" href="/resources/css/jquery-ui.min.css">
    <link type="text/css" rel="stylesheet" href="/resources/css/main.css">
</head>
<body>
<div class="nav">
    <i class="icon icon-home"></i>您的位置：首页 > 所属商户
</div>

<div class="main">
    <ul class="m-menu">
        <li><a href="/operator/register_shop_list.htm">注册商户</a> </li>
        <li><a href="/operator/area_shop_list.htm" class="active">所属商户</a> </li>
    </ul>

    <form class="form-control pb-30" action="/operator/area_shop_list.htm" method="post" id="searchForm">
    	<input type="hidden" name="currentPage" value="1" id="currentPage"/>
        商户店名：<input type="text" name="storeName" value="$!vo.storeName" class="txt min-txt" /> &nbsp;
        商户类型：
        <select class="txt min-txt" name="gcId">
        	<option value="">全部</option>
        	#foreach($gc in $!gcList)
        		<option #if($!vo.gcId == $gc.id) selected="selected" #end value="$!gc.id">$!gc.gcName</option>
        	#end
        </select> &nbsp;
        所属类型：
        <select class="txt min-txt" name="isOwn">
        	<option value="">全部</option>
        	<option #if($!vo.isOwn == "1") selected="selected" #end value="1">隶属</option>
        	<option #if($!vo.isOwn == "0") selected="selected" #end value="0">辖区</option>
        </select> &nbsp;
        注册时间：
        <input onclick="WdatePicker()" type="text" readonly="readonly" name="startTime" value="$!vo.startTime" class="txt min-txt datepicker" /> &nbsp;
        <input onclick="WdatePicker()" type="text" readonly="readonly" name="endTime" value="$!vo.endTime" class="txt min-txt datepicker" /> &nbsp;
        <input type="button" onclick="changeAction('/operator/area_shop_list.htm');" class="btn btn-blue btn-medium" value="搜索" /> &nbsp;
        <input type="button" onclick="changeAction('/operator/area_shop_export.htm');" class="btn btn-blue btn-medium" value="导出到Excel" />
    </form>

    #if($!objs.size() > 0)
    <div class="table-scroll-wrap">
        <table cellspacing="0" cellpadding="0" width="100%" class="table-simple table-scroll">
            <tr>
                <th>商户店名</th>
	            <th>经营地址</th>
	            <th>商户类型</th>
	            <th>手机号码</th>
	            <th>提供的消费反润总额</th>
	            <th>提供的手续费返润总额</th>
	            <th>注册时间</th>
	            <th>操作</th>
            </tr>
            #foreach($obj in $objs)
            <tr>
                	<td>$!obj.store.storeName</td>
		            <td>$!obj.store.storeAddress </td>
		            <td>$!obj.gcName</td>
		            <td>$!obj.loginName</td>
		            <td>#if($!obj.rebateConsumeAmount) $!obj.rebateConsumeAmount #else 0 #end</td>
		            <td>#if($!obj.rebateFeeAmount) $!obj.rebateFeeAmount #else 0 #end</td>
		            <td>$!date.format($!obj.createTime)</td>
		            <td>
		            	<a class="c_blue" href="/operator/shop_group_list.htm?storeId=$!{obj.storeId}">查看服务</a><span class="c_lightGray">|<a class="c_blue" href="/operator/shop_order_list.htm?sellerId=$!{obj.uid}">查看订单</a><span class="c_lightGray">|</span>
		            	#if($!op.level == 1)
		            	<a class="c_blue" href="/operator/operator_ad_add.html?storeId=$!{obj.storeId}&adType=5">推荐</a><span class="c_lightGray">|</span>
		            	#end
		            	<a class="c_blue" href="$!{shopPath}/group/store.htm?id=$!{obj.storeId}" target="_blank">查看详情</a><span class="c_lightGray">|</span>
		            	<a class="c_blue" href="javascript:showState($!obj.uid);">查看统计</a>
		            </td>
            </tr>
            #end
        </table>
    </div>

    <div class="fenye">
        $!gotoPageFormHTML
    </div>
	#else
		<div class="ui-warn text-center">
			暂无记录！
		</div>
	#end
</div>

<script src="/resources/js/jquery-1.8.2.js"></script>
<script src="/resources/js/jquery-ui.min.js"></script>
<script src="/resources/js/jquery.blockUI.dialog.js"></script>
<script src="/resources/js/common.js"></script>
<script src="/resources/js/WdatePicker/WdatePicker.js"></script>
<script>
function showState(id)
{
	jQuery.ajax({
		url:"/operator/shop_state_list.htm?sellerId="+id,
		type: "POST",
		dataType:"json",
		success:function(data){
			var sellerMemberCount = data.sellerMemberCount; 
			var sellerOwnMemberCount = data.sellerOwnMemberCount; 
			var sellerOwnSellerCount = data.sellerOwnSellerCount; 
			var sellerAllOrderCount = data.sellerAllOrderCount; 
			var sellerWeekOrderCount = data.sellerWeekOrderCount; 
			var sellerRebateOrderAmount = data.sellerRebateOrderAmount; 
			var sellerWeekRebateOrderAmount = data.sellerWeekRebateOrderAmount; 
			var sellerMonthRebateOrderAmount = data.sellerMonthRebateOrderAmount;
			
			jQuery.alert({
			    message: '<table cellspacing="0" cellpadding="0" width="100%" class="table-simple table-border">'+
			    		 '<tr><td>隶属会员</td><td>注册商户</td><td>注册会员</td></tr>'+
			    		 '<tr><td>'+sellerMemberCount+'</td><td>'+sellerOwnMemberCount+'</td><td>'+sellerOwnSellerCount+'</td></tr>'+
			    		 '<tr><td>本周收益统计</td><td>本月收益统计</td><td>历史收益统计</td></tr>'+
			    		 '<tr><td>'+sellerWeekRebateOrderAmount+'</td><td>'+sellerMonthRebateOrderAmount+'</td><td>'+sellerRebateOrderAmount+'</td></tr>'+
			    		 '<tr><td>本周订单数</td><td colspan="2">历史订单总数</td></tr>'+
			    		 '<tr><td>'+sellerWeekOrderCount+'</td><td colspan="2">'+sellerAllOrderCount+'</td></tr>'+
			    		 '</table>',
			    okText: "确定",
			    css: {
			    	width: "50%",
			    	left: "25%",
			    	top: "15%"
			    }
			});
		}
	});
}
</script>

</body>
</html>